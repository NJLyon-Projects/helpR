<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>supportR Vignette • supportR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="supportR Vignette">
<meta property="og:description" content="supportR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">supportR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/supportR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/njlyon0/supportR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>supportR Vignette</h1>
                        <h4 data-toc-skip class="author">Nicholas J
Lyon</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/njlyon0/supportR/blob/HEAD/vignettes/supportR.Rmd" class="external-link"><code>vignettes/supportR.Rmd</code></a></small>
      <div class="hidden name"><code>supportR.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>supportR</code> package is an amalgam of distinct functions
I’ve written to accomplish small data wrangling, quality control, or
visualization tasks. These functions tend to be short and
narrowly-defined. An additional consequence of the motivation for
creating them is that they tend to not be inter-related or united by a
common theme. If this vignette feels somewhat scattered because of that,
I hope it doesn’t negatively affect how informative it is or your
willingness to adopt <code>supportR</code> into your scripts!</p>
<p>This vignette describes the main functions of <code>supportR</code>
using the examples included in each function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("supportR")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/njlyon0/supportR" class="external-link">supportR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="data-wrangling">Data Wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"></a>
</h3>
<p>In order to demonstrate some of the data wrangling functions of
<code>supportR</code>, we’ll use some some example data from Dr. <a href="https://allisonhorst.com/" class="external-link">Allison Horst</a>’s <a href="https://github.com/allisonhorst/palmerpenguins" class="external-link"><code>palmerpenguins</code>
R package</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Glimpse the penguins dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [344 × 8] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ species          : Factor w/ 3 levels "Adelie","Chinstrap",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ island           : Factor w/ 3 levels "Biscoe","Dream",..: 3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span><span class="co">#&gt;  $ bill_length_mm   : num [1:344] 39.1 39.5 40.3 NA 36.7 39.3 38.9 39.2 34.1 42 ...</span></span>
<span><span class="co">#&gt;  $ bill_depth_mm    : num [1:344] 18.7 17.4 18 NA 19.3 20.6 17.8 19.6 18.1 20.2 ...</span></span>
<span><span class="co">#&gt;  $ flipper_length_mm: int [1:344] 181 186 195 NA 193 190 181 195 193 190 ...</span></span>
<span><span class="co">#&gt;  $ body_mass_g      : int [1:344] 3750 3800 3250 NA 3450 3650 3625 4675 3475 4250 ...</span></span>
<span><span class="co">#&gt;  $ sex              : Factor w/ 2 levels "female","male": 2 1 1 NA 1 2 1 2 NA NA ...</span></span>
<span><span class="co">#&gt;  $ year             : int [1:344] 2007 2007 2007 2007 2007 2007 2007 2007 2007 2007 ...</span></span></code></pre></div>
<p>With that data loaded, we can use the <code>summary_table</code>
function to quickly get group-wise summaries and retrieve generally
useful summary statistics.</p>
<p>The <code>groups</code> argument supports a vector of all of the
column names to group by while <code>response</code> must be a single
numeric column. The <code>drop_na</code> argument allows group
combinations that result in an NA to be automatically dropped (i.e., if
a penguin didn’t have an island listed that would be dropped). The mean,
standard deviation (SD), sample size, and standard error (SE) are all
returned to facilitate easy figure creation. There is also a
<code>round_digits</code> argument that lets you specify how many digits
you’d like to retain for the mean, SD, and SE.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize the data</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/summary_table.html">summary_table</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"island"</span><span class="op">)</span>,</span>
<span>                        response <span class="op">=</span> <span class="st">"bill_length_mm"</span>, drop_na <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt;     species    island  mean std_dev sample_size std_error</span></span>
<span><span class="co">#&gt; 1    Adelie    Biscoe 38.98    2.48          44      0.37</span></span>
<span><span class="co">#&gt; 2    Adelie     Dream 38.50    2.47          56      0.33</span></span>
<span><span class="co">#&gt; 3    Adelie Torgersen 38.95    3.03          52      0.42</span></span>
<span><span class="co">#&gt; 4 Chinstrap     Dream 48.83    3.34          68      0.41</span></span>
<span><span class="co">#&gt; 5    Gentoo    Biscoe 47.50    3.08         124      0.28</span></span></code></pre></div>
<p><code>crop_tri</code> allows dropping one “triangle” of a symmetric
dataframe / matrix. It also includes a <code>drop_diag</code> argument
that accepts a logical for whether to drop the diagonal of the data
object. This is primarily useful (I find) in allowing piping through
this function as opposed to using the base R notation for removing a
triangle of a symmetric data object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define a simple matrix wtih symmetric dimensions</span></span>
<span><span class="va">mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Crop off it's lower triangle</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/crop_tri.html">crop_tri</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mat</span>, drop_tri <span class="op">=</span> <span class="st">"lower"</span>, drop_diag <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]    1    2</span></span>
<span><span class="co">#&gt; [2,]   NA    1</span></span>
<span></span>
<span><span class="co"># Drop the diagonal as well</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/crop_tri.html">crop_tri</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mat</span>, drop_tri <span class="op">=</span> <span class="st">"lower"</span>, drop_diag <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt;      [,1] [,2]</span></span>
<span><span class="co">#&gt; [1,]   NA    2</span></span>
<span><span class="co">#&gt; [2,]   NA   NA</span></span></code></pre></div>
<p><code>array_melt</code> allows users to ‘melt’ an array of dimensions
X, Y, and Z into a dataframe containing columns “x”, “y”, “z”, and
“value” where “value” is whatever was stored at those coordinates in the
array.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make data to fill the array</span></span>
<span><span class="va">vec1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create dimension names (x = col, y = row, z = which matrix)</span></span>
<span><span class="va">x_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Col_1"</span>,<span class="st">"Col_2"</span>,<span class="st">"Col_3"</span><span class="op">)</span></span>
<span><span class="va">y_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Row_1"</span>,<span class="st">"Row_2"</span>,<span class="st">"Row_3"</span><span class="op">)</span></span>
<span><span class="va">z_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mat_1"</span>,<span class="st">"Mat_2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make an array from these components</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vec1</span>, <span class="va">vec2</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>           dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x_vals</span>, <span class="va">y_vals</span>, <span class="va">z_vals</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># "Melt" the array into a dataframe</span></span>
<span><span class="va">melted</span> <span class="op">&lt;-</span> <span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/array_melt.html">array_melt</a></span><span class="op">(</span>array <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Look at that top of that</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">melted</span><span class="op">)</span></span>
<span><span class="co">#&gt;       z     y     x value</span></span>
<span><span class="co">#&gt; 1 Mat_1 Col_1 Row_1     5</span></span>
<span><span class="co">#&gt; 2 Mat_1 Col_1 Row_2    10</span></span>
<span><span class="co">#&gt; 3 Mat_1 Col_1 Row_3    13</span></span>
<span><span class="co">#&gt; 4 Mat_1 Col_2 Row_1     9</span></span>
<span><span class="co">#&gt; 5 Mat_1 Col_2 Row_2    11</span></span>
<span><span class="co">#&gt; 6 Mat_1 Col_2 Row_3    14</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="quality-control">Quality Control<a class="anchor" aria-label="anchor" href="#quality-control"></a>
</h3>
<p>In terms of quality control functions, <code>diff_check</code>
compares two vectors and reports back what is in the first but not the
second (i.e., what is “lost”) and what is in the second but not the
first (i.e., what is “gained”). I find this most useful (A) when
comparing the index columns of two data objects I intend to join
together and (B) to ensure no columns are unintentionally removed during
lengthy <code>tidyverse</code>-style pipes (<code>%&gt;%</code>).</p>
<p><code>diff_check</code> also includes optional logical arguments
<code>sort</code> and <code>return</code> that will respectively either
sort the difference in both vectors and return a two-element if set to
<code>TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make two vectors</span></span>
<span><span class="va">vec1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span></span>
<span><span class="va">vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"z"</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare them!</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/diff_check.html">diff_check</a></span><span class="op">(</span>old <span class="op">=</span> <span class="va">vec1</span>, new <span class="op">=</span> <span class="va">vec2</span>, sort <span class="op">=</span> <span class="cn">TRUE</span>, return <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Following element(s) found in old object but not new:</span></span>
<span><span class="co">#&gt; [1] "b" "x"</span></span>
<span><span class="co">#&gt; Following element(s) found in new object but not old:</span></span>
<span><span class="co">#&gt; [1] "y" "z"</span></span>
<span><span class="co">#&gt; $lost</span></span>
<span><span class="co">#&gt; [1] "b" "x"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $gained</span></span>
<span><span class="co">#&gt; [1] "y" "z"</span></span></code></pre></div>
<p>This package also includes the function <code>num_check</code> that
identifies all values of a column that would be coerced to
<code>NA</code> if <code>as.numeric</code> was run on the column. Once
these non-numbers are identified you can handle that in whatever way you
feel is most appropriate. <code>num_check</code> is intended only to
flag these for your attention, <em>not</em> to attempt a fix using a
method you may or may not support.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe with non-numbers in a number column</span></span>
<span><span class="va">fish</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'species'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'salmon'</span>, <span class="st">'bass'</span>, <span class="st">'halibut'</span>, <span class="st">'eel'</span><span class="op">)</span>,</span>
<span>                   <span class="st">'count'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">'14x'</span>, <span class="st">'_23'</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `num_check` to identify non-numbers</span></span>
<span><span class="fu"><a href="../reference/num_check.html">num_check</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">fish</span>, col <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span>
<span><span class="co">#&gt; For 'count', 2 non-numbers identified: '14x' | '_23'</span></span>
<span><span class="co">#&gt; $count</span></span>
<span><span class="co">#&gt; [1] "14x" "_23"</span></span></code></pre></div>
<p><code>date_check</code> does a similar operation but is checking a
column for entries that would be coerced to <code>NA</code> by
<code>as.Date</code> instead. Note that if a date is sufficiently badly
formatted <code>as.Date</code> will throw an error instead of coercing
to <code>NA</code> so <code>date_check</code> will do the same
thing.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe including malformed dates</span></span>
<span><span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'site'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LTR"</span>, <span class="st">"GIL"</span>, <span class="st">"PYN"</span>, <span class="st">"RIN"</span><span class="op">)</span>,</span>
<span>                    <span class="st">'visit'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2021-01-01'</span>, <span class="st">'2021-01-0w'</span>, <span class="st">'1990'</span>, <span class="st">'2020-10-xx'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we can use our function to identify bad dates</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/date_check.html">date_check</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sites</span>, col <span class="op">=</span> <span class="st">'visit'</span><span class="op">)</span></span>
<span><span class="co">#&gt; For 'visit', 3 non-dates identified: '2021-01-0w' | '1990' | '2020-10-xx'</span></span>
<span><span class="co">#&gt; $visit</span></span>
<span><span class="co">#&gt; [1] "2021-01-0w" "1990"       "2020-10-xx"</span></span></code></pre></div>
<p>Both <code>num_check</code> and <code>date_check</code> can accept
multiple column names to the <code>col</code> argument (as of version
1.1.1) and all columns are checked separately.</p>
<p>Another date column quality control function is
<code>date_format_guess</code>. This This function checks a column of
dates (stored as characters!) and tries to guess the format of the date
(i.e., month/day/year, day/month/year, etc.).</p>
<p>It can make a more informed guess if there is a grouping column
because it can use the frequency of the “date” entries within those
groups to guess whether a given number is the day or the month. This is
based on the assumption that sampling occurs more often within months
than across them so the number that occurs in more rows within the
grouping values is most likely month.</p>
<p>Recognizing that assumption may be uncomfortable for some users, the
<code>groups</code> argument can be set to <code>FALSE</code> and it
will do the clearer judgment calls (i.e., if a number is &gt;12 it is
day, etc.). Note that dates that cannot be guessed by my function will
return “FORMAT UNCERTAIN” so that you can handle them using your
knowledge of the system (or by returning to your raw data if need
be).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe with dates in various formats and a grouping column</span></span>
<span><span class="va">my_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'data_enterer'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'person A'</span>, <span class="st">'person B'</span>,</span>
<span>                                       <span class="st">'person B'</span>, <span class="st">'person B'</span>,</span>
<span>                                       <span class="st">'person C'</span>, <span class="st">'person D'</span>,</span>
<span>                                       <span class="st">'person E'</span>, <span class="st">'person F'</span>,</span>
<span>                                       <span class="st">'person G'</span><span class="op">)</span>,</span>
<span>                    <span class="st">'bad_dates'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2022.13.08'</span>, <span class="st">'2021/2/02'</span>,</span>
<span>                                    <span class="st">'2021/2/03'</span>, <span class="st">'2021/2/04'</span>,</span>
<span>                                    <span class="st">'1899/1/15'</span>, <span class="st">'10-31-1901'</span>,</span>
<span>                                    <span class="st">'26/11/1901'</span>, <span class="st">'08.11.2004'</span>,</span>
<span>                                    <span class="st">'6/10/02'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we can invoke the function!</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/date_format_guess.html">date_format_guess</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_df</span>, date_col <span class="op">=</span> <span class="st">"bad_dates"</span>,</span>
<span>                            group_col <span class="op">=</span> <span class="st">"data_enterer"</span>, return <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Returning dataframe of data format guesses</span></span>
<span><span class="co">#&gt;   data_enterer  bad_dates     format_guess</span></span>
<span><span class="co">#&gt; 1     person A 2022.13.08   year/day/month</span></span>
<span><span class="co">#&gt; 2     person B  2021/2/02   year/month/day</span></span>
<span><span class="co">#&gt; 3     person B  2021/2/03   year/month/day</span></span>
<span><span class="co">#&gt; 4     person B  2021/2/04   year/month/day</span></span>
<span><span class="co">#&gt; 5     person C  1899/1/15   year/month/day</span></span>
<span><span class="co">#&gt; 6     person D 10-31-1901   month/day/year</span></span>
<span><span class="co">#&gt; 7     person E 26/11/1901   day/month/year</span></span>
<span><span class="co">#&gt; 8     person F 08.11.2004 FORMAT UNCERTAIN</span></span>
<span><span class="co">#&gt; 9     person G    6/10/02 FORMAT UNCERTAIN</span></span>
<span></span>
<span><span class="co"># If preferred, do it without groups and return a vector</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/date_format_guess.html">date_format_guess</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_df</span>, date_col <span class="op">=</span> <span class="st">"bad_dates"</span>,</span>
<span>                            groups <span class="op">=</span> <span class="cn">FALSE</span>, return <span class="op">=</span> <span class="st">"vector"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Defining `groups` is strongly recommended! If none exist, consider adding a single artificial group shared by all rows then re-run this function</span></span>
<span><span class="co">#&gt; Returning vector of data format guesses</span></span>
<span><span class="co">#&gt; [1] "year/day/month"   "FORMAT UNCERTAIN" "FORMAT UNCERTAIN" "FORMAT UNCERTAIN"</span></span>
<span><span class="co">#&gt; [5] "year/month/day"   "month/day/year"   "day/month/year"   "FORMAT UNCERTAIN"</span></span>
<span><span class="co">#&gt; [9] "FORMAT UNCERTAIN"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-visualization">Data Visualization<a class="anchor" aria-label="anchor" href="#data-visualization"></a>
</h3>
<p>I’ve created a set of custom <code>ggplot2</code> <code>theme</code>
elements to guarantee that all of my figures share similar aesthetics.
Feel free to use <code>theme_lyon</code> if you have similar
preferences!</p>
<p><code>theme_lyon</code> does the following changes to a
<code>ggplot2</code> plot:</p>
<ul>
<li>Removes legend title and background</li>
<li>Removes gray box behind colors in legend elements</li>
<li>Removes major/minor gridlines</li>
<li>Makes axes’ lines black</li>
<li>Increases the font size of the axes titles and tick labels</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load ggplot2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a plot and allow default ggplot themeing to be added</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">body_mass_g</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>outlier.shape <span class="op">=</span> <span class="fl">24</span><span class="op">)</span></span></code></pre></div>
<p><img src="supportR_files/figure-html/theme_lyon-1.png" width="480"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Compare with the same plot with my theme</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">body_mass_g</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>outlier.shape <span class="op">=</span> <span class="fl">24</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/theme_lyon.html">theme_lyon</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="supportR_files/figure-html/theme_lyon-2.png" width="480"></p>
<p>I’ve also created <code>nms_ord</code> and <code>pcoa_ord</code> for
Non-Metric Multi-Dimensional Scaling (NMS) &amp; Principal Coordinates
Analysis (PCoA) Ordinations respectively.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data from the `vegan` package</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"varespec"</span>, package <span class="op">=</span> <span class="st">'vegan'</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">varespec</span></span>
<span></span>
<span><span class="co"># Make a columns to split the data into 4 groups</span></span>
<span><span class="va">factor_4lvl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_1"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_2"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_3"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_4"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># And combine them into a single data object</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">factor_4lvl</span>, <span class="va">resp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Actually perform multidimensional scaling</span></span>
<span><span class="va">mds</span> <span class="op">&lt;-</span> <span class="fu">vegan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/metaMDS.html" class="external-link">metaMDS</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, autotransform <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                      expand <span class="op">=</span> <span class="cn">FALSE</span>, k <span class="op">=</span> <span class="fl">2</span>, try <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With the scaled object and original dataframe we can use this function</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/nms_ord.html">nms_ord</a></span><span class="op">(</span>mod <span class="op">=</span> <span class="va">mds</span>, groupcol <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">factor_4lvl</span>,</span>
<span>                  title <span class="op">=</span> <span class="st">'4-Level NMS'</span>, leg_pos <span class="op">=</span> <span class="st">'topright'</span>,</span>
<span>                  leg_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>, <span class="st">'4'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="supportR_files/figure-html/nms_ord-1.png" width="480"></p>
<p><code>pcoa_ord</code> has the same syntax as <code>nms_ord</code> but
it expects an object created by <code><a href="https://rdrr.io/pkg/ape/man/pcoa.html" class="external-link">ape::pcoa</a></code> rather than
<code><a href="https://rdrr.io/pkg/vegan/man/metaMDS.html" class="external-link">vegan::metaMDS</a></code>.</p>
</div>
<div class="section level3">
<h3 id="operations-outside-of-r">Operations Outside of R<a class="anchor" aria-label="anchor" href="#operations-outside-of-r"></a>
</h3>
<p>Finally, I’ve written several functions that allow you to interact
with APIs outside of R via R functions with hopefully more comfortable
syntax. Because these functions rely on user credentials, they cannot be
run non-interactively (as in a CRAN submission) so the following code
chunks are not evaluated and are included as examples of the proper
syntax for your reference.</p>
<p>For GitHub users, I’ve developed two related functions:
<code>github_ls</code> and <code>github_tree</code>.
<code>github_ls</code> accepts the URL to a GitHub repository to which
you have access (public or private). It creates a dataframe of that
repository’s contents including their names, types, and full paths
within the repository. Listing of a particular folder and recursive
listing of all nested subfolders within a repository are both supported
via additional arguments.</p>
<p>If the <code>folder</code> argument is set to <code>NULL</code> (the
default) the top level of the repository is listed.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List all files in a GitHub repository</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/github_ls.html">github_ls</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"https://github.com/njlyon0/supportR"</span>,</span>
<span>                    recursive <span class="op">=</span> <span class="cn">TRUE</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or list files in only a particular folder</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/github_ls.html">github_ls</a></span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"https://github.com/njlyon0/supportR"</span>, folder <span class="op">=</span> <span class="st">"R"</span>,</span>
<span>                    recursive <span class="op">=</span> <span class="cn">FALSE</span>, quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><code>github_tree</code> is an extension of <code>github_ls</code>
that identifies all files in a repository and creates a file tree
diagram of that folder structure that is simple and human-readable.
Unlike <code>github_ls</code>, <code>github_tree</code> only supports
recursive identification of all files beginning at the top level of the
repository. It does however allow users to exclude the listings of
particular folders by specifying their names in the <code>exclude</code>
argument.</p>
<p>I think this could be particularly useful to embed in a repository’s
<code>README.Rmd</code> to create a quick-and-easy file map for visitors
to use as a guide in navigating the repository’s contents.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Create a file tree diagram of a GitHub repository</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>supportR<span class="sc">::</span><span class="fu">github_tree</span>(<span class="at">repo =</span> <span class="at">repo =</span> <span class="st">"https://github.com/njlyon0/supportR"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>                      <span class="at">exclude =</span> <span class="fu">c</span>(<span class="st">"docs"</span>, <span class="st">"man"</span>, <span class="st">".github"</span>), <span class="at">quiet =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>For users who create RMarkdown reports and want to store them in a
Google Drive folder, <code>rmd_export</code> knits and exports a given R
Markdown file both locally and to a user-designated Google Drive folder.
Note that you <strong><em>MUST</em></strong> authenticate your R session
with the <code>googledrive</code> package so that it has permission to
access the Drive folder you supply. I recommend running
<code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">googledrive::drive_auth()</a></code> and doing the authentication
“dance” in a browser before using <code>rmd_export</code> to reduce the
chances of any errors.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Authorize R to interact with GoogleDrive</span></span>
<span><span class="fu">googledrive</span><span class="fu">::</span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">drive_auth</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `rmd_export()` to knit and export an .Rmd file</span></span>
<span><span class="fu">supportR</span><span class="fu">::</span><span class="fu"><a href="../reference/rmd_export.html">rmd_export</a></span><span class="op">(</span>rmd <span class="op">=</span> <span class="st">"my_markdown.Rmd"</span>,</span>
<span>                     in_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"Folder in my WD with the .Rmd named in `rmd`"</span><span class="op">)</span>,</span>
<span>                     out_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"Folder in my WD to save the knit file to"</span><span class="op">)</span>,</span>
<span>                     out_name <span class="op">=</span> <span class="st">"desired name for output"</span>,</span>
<span>                     out_type <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>                     drive_link <span class="op">=</span> <span class="st">"&lt;Full Google Drive link&gt;"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas J Lyon.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
