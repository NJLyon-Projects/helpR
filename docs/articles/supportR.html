<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>supportR Vignette • supportR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="supportR Vignette">
<meta property="og:description" content="supportR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">supportR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/supportR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>supportR Vignette</h1>
                        <h4 data-toc-skip class="author">Nicholas J
Lyon</h4>
            
      
      
      <div class="hidden name"><code>supportR.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>supportR</code> package is an amalgam of distinct functions
I’ve written to accomplish small data wrangling, quality control, or
visualization tasks. These functions tend to be short and
narrowly-defined. An additional consequence of the motivation for
creating them is that they tend to not be inter-related or united by a
common theme. If this vignette feels somewhat scattered because of that,
I hope it doesn’t negatively affect how informative this is!</p>
<p>This vignette describes the main functions of <code>supportR</code>
using the examples included in each function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">supportR</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="summarizing-data">Summarizing Data<a class="anchor" aria-label="anchor" href="#summarizing-data"></a>
</h3>
<p>In order to demonstrate the summarization function(s), we’ll use some
some example data from Dr. <a href="https://allisonhorst.com/" class="external-link">Allison
Horst</a>’s <a href="https://github.com/allisonhorst/palmerpenguins" class="external-link"><code>palmerpenguins</code>
R package</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Glimpse the penguins dataset</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 344</span></span>
<span><span class="co">#&gt; Columns: 8</span></span>
<span><span class="co">#&gt; $ species           <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…</span></span>
<span><span class="co">#&gt; $ island            <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…</span></span>
<span><span class="co">#&gt; $ bill_length_mm    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …</span></span>
<span><span class="co">#&gt; $ bill_depth_mm     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …</span></span>
<span><span class="co">#&gt; $ flipper_length_mm <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…</span></span>
<span><span class="co">#&gt; $ body_mass_g       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …</span></span>
<span><span class="co">#&gt; $ sex               <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> male, female, female, NA, female, male, female, male…</span></span>
<span><span class="co">#&gt; $ year              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</span></span></code></pre></div>
<p>With that data loaded, we can use the <code>summary_table</code>
function to quickly do group-wise summarization and retrieve generally
useful summary statistics.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Summarize the data</span></span>
<span><span class="fu"><a href="../reference/summary_table.html">summary_table</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span>, groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"species"</span>, <span class="st">"island"</span><span class="op">)</span>,</span>
<span>              response <span class="op">=</span> <span class="st">"bill_length_mm"</span>, drop_na <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co">#&gt;     species    island  mean std_dev sample_size std_error</span></span>
<span><span class="co">#&gt; 1    Adelie    Biscoe 38.98    2.48          44      0.37</span></span>
<span><span class="co">#&gt; 2    Adelie     Dream 38.50    2.47          56      0.33</span></span>
<span><span class="co">#&gt; 3    Adelie Torgersen 38.95    3.03          52      0.42</span></span>
<span><span class="co">#&gt; 4 Chinstrap     Dream 48.83    3.34          68      0.41</span></span>
<span><span class="co">#&gt; 5    Gentoo    Biscoe 47.50    3.08         124      0.28</span></span></code></pre></div>
<p>The <code>groups</code> argument supports a vector of all of the
column names to group by while <code>response</code> must be a single
numeric column. The <code>drop_na</code> argument allows group
combinations that result in an NA to be automatically dropped (i.e., if
a penguin didn’t have an island listed that would be dropped). The mean,
standard deviation (SD), sample size, and standard error (SE) are all
returned to facilitate easy figure creation. There is also a
<code>round_digits</code> argument that lets you specify how many digits
you’d like to retain for the mean, SD, and SE.</p>
</div>
<div class="section level3">
<h3 id="quality-control">Quality Control<a class="anchor" aria-label="anchor" href="#quality-control"></a>
</h3>
<p>I do write a lot of <code>tidyverse</code>-style lengthy pipes
(<code>%&gt;%</code>) that create and remove potentially many columns
without creating intermediary objects. This does have the potential for
accidentally dropping desired columns without noticing (especially when
using <code><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">dplyr::select</a></code> to <em>implicitly</em> exclude
columns). I’ve created the <code>diff_check</code> function to–in
part–quickly confirm that this isn’t happening.</p>
<p>Generally speaking, <code>diff_check</code> just compares two vectors
and reports back what is in the first but not the second (i.e., what is
“lost”) and what is in the second but not the first (i.e., what is
“gained”).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make two vectors</span></span>
<span><span class="va">vec1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span></span>
<span><span class="va">vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y"</span>, <span class="st">"z"</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare them!</span></span>
<span><span class="fu"><a href="../reference/diff_check.html">diff_check</a></span><span class="op">(</span>old <span class="op">=</span> <span class="va">vec1</span>, new <span class="op">=</span> <span class="va">vec2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Following element(s) found in old object but not new:</span></span>
<span><span class="co">#&gt; [1] "b" "x"</span></span>
<span><span class="co">#&gt; Following element(s) found in new object but not old:</span></span>
<span><span class="co">#&gt; [1] "y" "z"</span></span></code></pre></div>
<p><code>diff_check</code> also includes optional logical arguments
<code>sort</code> and <code>return</code> that will respectively either
sort the difference in both vectors and return a two-element if set to
<code>TRUE</code>. As I said above, I most often feed
<code>diff_check</code> the vector of column names returned by
<code>names</code> before and after a pipe to ensure that I know which
columns were lost/gained by a set of operations.</p>
<p>This package also includes the function <code>num_check</code> that
identifies all values of a column that would be coerced to
<code>NA</code> if <code>as.numeric</code> was run on the column.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe with non-numbers in a number column</span></span>
<span><span class="va">fish</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'species'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'salmon'</span>, <span class="st">'bass'</span>, <span class="st">'halibut'</span>, <span class="st">'eel'</span><span class="op">)</span>,</span>
<span>                   <span class="st">'count'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">'14x'</span>, <span class="st">'_23'</span>, <span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `num_check` to identify non-numbers</span></span>
<span><span class="fu"><a href="../reference/num_check.html">num_check</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">fish</span>, col <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "14x" "_23"</span></span></code></pre></div>
<p>Once these non-numbers are identified you can handle that in whatever
way you feel is most appropriate. <code>num_check</code> is intended
only to flag these for your attention, <em>not</em> to attempt a fix
using a method you may or may not support.</p>
<p><code>date_check</code> on the other hand does that same thing but it
is checking a column for entries that would be coerced to
<code>NA</code> by <code>as.Date</code> instead. Note that if a date is
sufficiently badly formatted <code>as.Date</code> will throw an error
instead of coercing to <code>NA</code> to <code>date_check</code> will
do the same thing.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe including malformed dates</span></span>
<span><span class="va">sites</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'site'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"LTR"</span>, <span class="st">"GIL"</span>, <span class="st">"PYN"</span>, <span class="st">"RIN"</span><span class="op">)</span>,</span>
<span>                    <span class="st">'visit'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2021-01-01'</span>, <span class="st">'2021-01-0w'</span>, <span class="st">'1990'</span>, <span class="st">'2020-10-xx'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we can use our function to identify bad dates</span></span>
<span><span class="fu"><a href="../reference/date_check.html">date_check</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">sites</span>, col <span class="op">=</span> <span class="st">'visit'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2021-01-0w" "1990"       "2020-10-xx"</span></span></code></pre></div>
<p>Both <code>num_check</code> and <code>date_check</code> have an
expanded version (<code>multi_num_check</code> and
<code>multi_date_check</code> respectively) that uses a
<code>col_vec</code> argument instead of <code>col</code>.
<code>col_vec</code> accepts a vector of column names and checks all of
those columns for non-numbers or bad dates.</p>
<p>Finally (for now), is the descriptively-named
<code>date_format_guess</code> function. This function checks a column
of dates (stored as characters!) and tries to guess the format of the
date (i.e., month/day/year, day/month/year, etc.).</p>
<p>It can make a more informed guess if there is a grouping column
because it can use the frequency of the numbers to guess whether a given
number is the day or the month. This is based on the assumption that
sampling occurs more often within months than across so if the “left”
number is repeated more than the “right” it is likely the month while
the less frequent number (i.e., more unqiue values in that position) is
likely days.</p>
<p>If you are uncomfortable with that assumption (totally fine!) you can
set <code>groups</code> to <code>FALSE</code> and it will do the more
commonplace assessments (i.e., if a number is &gt;12 it is day,
etc.).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make a dataframe with dates in various formats and a grouping column</span></span>
<span><span class="va">my_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">'data_enterer'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'person A'</span>, <span class="st">'person B'</span>,</span>
<span>                                       <span class="st">'person B'</span>, <span class="st">'person B'</span>,</span>
<span>                                       <span class="st">'person C'</span>, <span class="st">'person D'</span>,</span>
<span>                                       <span class="st">'person E'</span>, <span class="st">'person F'</span>,</span>
<span>                                       <span class="st">'person G'</span><span class="op">)</span>,</span>
<span>                    <span class="st">'bad_dates'</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'2022.13.08'</span>, <span class="st">'2021/2/02'</span>,</span>
<span>                                    <span class="st">'2021/2/03'</span>, <span class="st">'2021/2/04'</span>,</span>
<span>                                    <span class="st">'1899/1/15'</span>, <span class="st">'10-31-1901'</span>,</span>
<span>                                    <span class="st">'26/11/1901'</span>, <span class="st">'08.11.2004'</span>,</span>
<span>                                    <span class="st">'6/10/02'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now we can invoke the function!</span></span>
<span><span class="fu"><a href="../reference/date_format_guess.html">date_format_guess</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_df</span>, date_col <span class="op">=</span> <span class="st">"bad_dates"</span>,</span>
<span>                  group_col <span class="op">=</span> <span class="st">"data_enterer"</span>, return <span class="op">=</span> <span class="st">"dataframe"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Returning dataframe of data format guesses</span></span>
<span><span class="co">#&gt;   data_enterer  bad_dates     format_guess</span></span>
<span><span class="co">#&gt; 1     person A 2022.13.08   year/day/month</span></span>
<span><span class="co">#&gt; 2     person B  2021/2/02   year/month/day</span></span>
<span><span class="co">#&gt; 3     person B  2021/2/03   year/month/day</span></span>
<span><span class="co">#&gt; 4     person B  2021/2/04   year/month/day</span></span>
<span><span class="co">#&gt; 5     person C  1899/1/15   year/month/day</span></span>
<span><span class="co">#&gt; 6     person D 10-31-1901   month/day/year</span></span>
<span><span class="co">#&gt; 7     person E 26/11/1901   day/month/year</span></span>
<span><span class="co">#&gt; 8     person F 08.11.2004 FORMAT UNCERTAIN</span></span>
<span><span class="co">#&gt; 9     person G    6/10/02 FORMAT UNCERTAIN</span></span>
<span></span>
<span><span class="co"># If preferred, do it without groups and return a vector</span></span>
<span><span class="fu"><a href="../reference/date_format_guess.html">date_format_guess</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my_df</span>, date_col <span class="op">=</span> <span class="st">"bad_dates"</span>,</span>
<span>                  groups <span class="op">=</span> <span class="cn">FALSE</span>, return <span class="op">=</span> <span class="st">"vector"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Defining `groups` is strongly recommended! If none exist, consider adding a single artificial group shared by all rows then re-run this function</span></span>
<span><span class="co">#&gt; Returning vector of data format guesses</span></span>
<span><span class="co">#&gt; [1] "year/day/month"   "FORMAT UNCERTAIN" "FORMAT UNCERTAIN" "FORMAT UNCERTAIN"</span></span>
<span><span class="co">#&gt; [5] "year/month/day"   "month/day/year"   "day/month/year"   "FORMAT UNCERTAIN"</span></span>
<span><span class="co">#&gt; [9] "FORMAT UNCERTAIN"</span></span></code></pre></div>
<p>Note that dates that cannot be guessed by my function will return
“FORMAT UNCERTAIN” so that you can handle them using your knowledge of
the system (or by returning to your raw data if need be).</p>
</div>
<div class="section level3">
<h3 id="data-visualization">Data Visualization<a class="anchor" aria-label="anchor" href="#data-visualization"></a>
</h3>
<p>I’ve created a set of custom <code>ggplot2</code> <code>theme</code>
elements to guarantee that all of my figures share similar aesthetics.
Feel free to use <code>theme_lyon</code> if you have similar
preferences!</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load ggplot2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">penguins</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species</span>, y <span class="op">=</span> <span class="va">body_mass_g</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span>outlier.shape <span class="op">=</span> <span class="fl">24</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_lyon.html">theme_lyon</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 2 rows containing non-finite values (`stat_boxplot()`).</span></span></code></pre></div>
<p><img src="supportR_files/figure-html/theme_lyon-1.png" width="50%"></p>
<p><code>theme_lyon</code> does the following changes to a
<code>ggplot2</code> plot:</p>
<ul>
<li>Removes legend title and background</li>
<li>Removes gray box behind colors in legend elements</li>
<li>Removes major/minor gridlines</li>
<li>Makes axes’ lines black</li>
<li>Increases the font size of the axes titles and tick labels</li>
</ul>
<p>I’ve also created <code>nms_ord</code> and <code>pcoa_ord</code> for
Non-Metric Multi-Dimensional Scaling (NMS) &amp; Principale Coordinates
Analysis (PCoA) Ordinations respectively.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data from the `vegan` package</span></span>
<span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"varespec"</span>, package <span class="op">=</span> <span class="st">'vegan'</span><span class="op">)</span></span>
<span><span class="va">resp</span> <span class="op">&lt;-</span> <span class="va">varespec</span></span>
<span></span>
<span><span class="co"># Make a columns to split the data into 4 groups</span></span>
<span><span class="va">factor_4lvl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_1"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_2"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_3"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep.int</a></span><span class="op">(</span><span class="st">"Trt_4"</span>, <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">resp</span><span class="op">)</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># And combine them into a single data object</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">factor_4lvl</span>, <span class="va">resp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Actually perform multidimensional scaling</span></span>
<span><span class="va">mds</span> <span class="op">&lt;-</span> <span class="fu">vegan</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/metaMDS.html" class="external-link">metaMDS</a></span><span class="op">(</span><span class="va">data</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>, autotransform <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>                      expand <span class="op">=</span> <span class="cn">FALSE</span>, k <span class="op">=</span> <span class="fl">2</span>, try <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># With the scaled object and original dataframe we can use this function</span></span>
<span><span class="fu"><a href="../reference/nms_ord.html">nms_ord</a></span><span class="op">(</span>mod <span class="op">=</span> <span class="va">mds</span>, groupcol <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">factor_4lvl</span>,</span>
<span>        title <span class="op">=</span> <span class="st">'4-Level NMS'</span>, leg_pos <span class="op">=</span> <span class="st">'topright'</span>,</span>
<span>        leg_cont <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1'</span>, <span class="st">'2'</span>, <span class="st">'3'</span>, <span class="st">'4'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="supportR_files/figure-html/nms_ord-1.png" width="50%"></p>
<p><code>pcoa_ord</code> has the same syntax as <code>nms_ord</code> but
it expects an object created by <code><a href="https://rdrr.io/pkg/ape/man/pcoa.html" class="external-link">ape::pcoa</a></code> rather than
<code><a href="https://rdrr.io/pkg/vegan/man/metaMDS.html" class="external-link">vegan::metaMDS</a></code>.</p>
</div>
<div class="section level3">
<h3 id="reshaping-data">Reshaping Data<a class="anchor" aria-label="anchor" href="#reshaping-data"></a>
</h3>
<p><code>array_melt</code> allows users to ‘melt’ an array of dimensions
X, Y, and Z into a dataframe containing columns “x”, “y”, “z”, and
“value” where “value” is whatever was stored at those coordinates in the
array.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make data to fill the array</span></span>
<span><span class="va">vec1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">9</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">vec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span><span class="op">:</span><span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create dimension names (x = col, y = row, z = which matrix)</span></span>
<span><span class="va">x_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Col_1"</span>,<span class="st">"Col_2"</span>,<span class="st">"Col_3"</span><span class="op">)</span></span>
<span><span class="va">y_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Row_1"</span>,<span class="st">"Row_2"</span>,<span class="st">"Row_3"</span><span class="op">)</span></span>
<span><span class="va">z_vals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mat_1"</span>,<span class="st">"Mat_2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Make an array from these components</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">vec1</span>, <span class="va">vec2</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>           dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">x_vals</span>, <span class="va">y_vals</span>, <span class="va">z_vals</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># "Melt" the array into a dataframe</span></span>
<span><span class="fu"><a href="../reference/array_melt.html">array_melt</a></span><span class="op">(</span>array <span class="op">=</span> <span class="va">g</span><span class="op">)</span></span>
<span><span class="co">#&gt;        z     y     x value</span></span>
<span><span class="co">#&gt; 1  Mat_1 Col_1 Row_1     5</span></span>
<span><span class="co">#&gt; 2  Mat_1 Col_1 Row_2    10</span></span>
<span><span class="co">#&gt; 3  Mat_1 Col_1 Row_3    13</span></span>
<span><span class="co">#&gt; 4  Mat_1 Col_2 Row_1     9</span></span>
<span><span class="co">#&gt; 5  Mat_1 Col_2 Row_2    11</span></span>
<span><span class="co">#&gt; 6  Mat_1 Col_2 Row_3    14</span></span>
<span><span class="co">#&gt; 7  Mat_1 Col_3 Row_1     3</span></span>
<span><span class="co">#&gt; 8  Mat_1 Col_3 Row_2    12</span></span>
<span><span class="co">#&gt; 9  Mat_1 Col_3 Row_3    15</span></span>
<span><span class="co">#&gt; 10 Mat_2 Col_1 Row_1     5</span></span>
<span><span class="co">#&gt; 11 Mat_2 Col_1 Row_2    10</span></span>
<span><span class="co">#&gt; 12 Mat_2 Col_1 Row_3    13</span></span>
<span><span class="co">#&gt; 13 Mat_2 Col_2 Row_1     9</span></span>
<span><span class="co">#&gt; 14 Mat_2 Col_2 Row_2    11</span></span>
<span><span class="co">#&gt; 15 Mat_2 Col_2 Row_3    14</span></span>
<span><span class="co">#&gt; 16 Mat_2 Col_3 Row_1     3</span></span>
<span><span class="co">#&gt; 17 Mat_2 Col_3 Row_2    12</span></span>
<span><span class="co">#&gt; 18 Mat_2 Col_3 Row_3    15</span></span></code></pre></div>
<p><code>crop_tri</code> also exists under this category and provides a
hopefully straightforward way of dropping one “triangle” of a dataframe
/ matrix. It also includes a <code>drop_diag</code> argument that
accepts a logical for whether to drop the diagonal of the data object.
See <code><a href="../reference/crop_tri.html">?crop_tri</a></code>. for complete syntax explanation</p>
</div>
<div class="section level3">
<h3 id="miscellaneous-other-functions">Miscellaneous Other Functions<a class="anchor" aria-label="anchor" href="#miscellaneous-other-functions"></a>
</h3>
<p>Finally, I’ve written <code>rmd_export</code> which knits and exports
a given R Markdown file locally and to a user-designated Google Drive
folder. Note that you <strong><em>MUST</em></strong> authenticate your R
session with the <code>googledrive</code> package so that it has
permission to access the Drive folder you supply. I recommend running
<code><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">googledrive::drive_auth()</a></code> and doing the authentication
“dance” before using <code>rmd_export</code> to ensure that this doesn’t
cause issues for you.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Authorize R to interact with GoogleDrive</span></span>
<span><span class="fu">googledrive</span><span class="fu">::</span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_auth.html" class="external-link">drive_auth</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use `rmd_export()` to knit and export an .Rmd file</span></span>
<span><span class="fu"><a href="../reference/rmd_export.html">rmd_export</a></span><span class="op">(</span>rmd <span class="op">=</span> <span class="st">"my_markdown.Rmd"</span>,</span>
<span>           in_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"Folder in my WD with the .Rmd named in `rmd`"</span><span class="op">)</span>,</span>
<span>           out_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"Folder in my WD to save the knit file to"</span><span class="op">)</span>,</span>
<span>           out_name <span class="op">=</span> <span class="st">"desired name for output"</span>,</span>
<span>           out_type <span class="op">=</span> <span class="st">"html"</span>,</span>
<span>           drive_link <span class="op">=</span> <span class="st">"&lt;Full Google Drive link&gt;"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="looking-ahead">Looking Ahead<a class="anchor" aria-label="anchor" href="#looking-ahead"></a>
</h2>
<p>If you have ideas for other functions that
<code>lterpalettefinder</code> could contain, post them as <a href="https://github.com/njlyon0/supportR/issues" class="external-link">a GitHub Issue</a> and
we’ll review them as soon as possible!</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas J Lyon.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
